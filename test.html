<!DOCTYPE html>
<html>
<head>
	<title>text</title>
</head>
<body>
	upload : <input id="upload" type="file" name="" />
	create <input id="btn" type="button" name="see">
	<div class="imgBox"></div>
</body>
</html>

<script type="text/javascript">
	var fileInput = document.querySelector('#upload'),
		body = document.querySelector('body'),
		box = document.querySelector('.imgBox'),
		create = document.querySelector('#btn');

		create.onclick = function () {
			var file = fileInput.files[0];
			if (!file) {
				alert('请选择文件');
			} else {
				var reader = new FileReader ();
				reader.readAsDataURL(file);
				reader.onload = function (e) {
					var resultURL = e.target.result;
					var oImg = document.createElement('img');
					oImg.src = resultURL;
					var cvs = document.createElement('canvas');
					oImg.onload = function () {
						var W = 200,
							H = 200;
					cvs.style.width = '2.2rem';
					cvs.style.height = '2.2rem';
					var ctx = cvs.getContext('2d');
					ctx.drawImage(this,0,0,cvs.width,cvs.height);
					newImageData = cvs.toDataURL(file.type,0.5);
					box.innerHTML = '<img src="' + newImageData + '"   />';
					console.log(1)
					}					
				}
			}
		}

</script>